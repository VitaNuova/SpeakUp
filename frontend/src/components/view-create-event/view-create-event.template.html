<aside class="bg-dark extra-padding-top">
    <div class="container text-center">
        <div class="call-to-action">
            <h2>Create New Event</h2>
        </div>
    </div>
</aside>
<md-content class="md-no-momentum">
    <div layout="row" layout-margin>
        <h1>Create event page</h1>
    </div>
    <div layout="row" layout-margin layout-padding>
        <div layout="column" flex="50">
            <form name="EventForm">
                <md-input-container class="md-block">
                    <label>Name</label>
                    <input ng-model="$ctrl.model.name" type="text" class="small-width" required>
                </md-input-container>

                <md-input-container class="md-block">
                    <div layout="column" ng-cloak>
                        <md-select placeholder="Language" ng-model="$ctrl.model.language" md-on-open="$ctrl.getLanguages()" class="small-width" required="">
                            <md-option ng-value="language" ng-repeat="language in $ctrl.languages">{{language.name}}</md-option>
                        </md-select>
                    </div>
                </md-input-container>

                <md-input-container class="md-block">
                    <div layout="column" ng-cloak>
                        <md-select placeholder="Topic of the event #1" ng-model="$ctrl.topic1" md-on-open="$ctrl.getTopics()" class="small-width" required="">
                            <md-option ng-value="topic" ng-repeat="topic in $ctrl.topics">{{topic.name}}</md-option>
                        </md-select>
                    </div>
                </md-input-container>

                <md-input-container class="md-block">
                    <div layout="column" ng-cloak>
                        <md-select placeholder="Topic of the event #2 (optional)" ng-model="$ctrl.topic2" md-on-open="$ctrl.getTopics()" class="small-width" ng-required="$ctrl.topic3">
                            <md-option ng-value="topic" ng-repeat="topic in $ctrl.topics">{{topic.name}}</md-option>
                        </md-select>
                    </div>
                </md-input-container>

                <md-input-container class="md-block">
                    <div layout="column" ng-cloak>
                        <md-select placeholder="Topic of the event #3 (optional)" ng-model="$ctrl.topic3" md-on-open="$ctrl.getTopics()" class="small-width">
                            <md-option ng-value="topic" ng-repeat="topic in $ctrl.topics">{{topic.name}}</md-option>
                        </md-select>
                    </div>
                </md-input-container>
            </form>
        </div>

        <md-divider></md-divider>

        <div layout="column" flex="50" md-virtual-repeat-container>
            <md-list>
                <md-list-item ng-repeat="offer in $ctrl.offers" ng-class="{selected: offer.selected}">
                    <img ng-src="{{offer.imagePath}}" alt="Offer Logo" class="md-avatar">
                    <div class="md-list-item-text padding" layout="column">
                        <div>
                            <md-checkbox class="black" ng-model="offer.selected" ng-click="$ctrl.uncheckOthers($index); $ctrl.model.offer=offer"></md-checkbox>
                            <span>{{offer.restaurant.name}}, -{{offer.discount}}%</span>
                        </div>
                        <div>
                            <md-icon>
                                <ng-md-icon icon="date_range"></ng-md-icon>
                            </md-icon>
                            <span>{{$ctrl.getFullDate(offer)}}</span>
                        </div>
                        <div>
                            <md-icon>
                                <ng-md-icon icon="schedule"></ng-md-icon>
                            </md-icon>
                            <span>{{$ctrl.getTime(offer.from)}} - {{$ctrl.getTime(offer.to)}}</span>
                        </div>
                        <div>
                            <md-icon>
                                <ng-md-icon icon="info"></ng-md-icon>
                            </md-icon>
                            <span>discount valid for a group of {{offer.numOfPeople}}</span>
                        </div>
                    </div>
                    <md-divider ng-if="!$last"></md-divider>
                </md-list-item>
            </md-list>
        </div>
    </div>
    <div layout="row" layout-margin layout-align="center center">
        <md-button ng-disabled="!EventForm.$valid || !$ctrl.model.offer" class="md-raised md-primary" type="submit" ng-click="$ctrl.createEvent()">Create event</md-button>
    </div>
</md-content>